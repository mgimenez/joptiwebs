<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js" type="text/javascript"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
	#container{
		background-image:url(bkg.jpg);
		width:100%;
		height:100%;
		background-repeat:none;
		background-position:0 0;
		-webkit-background-size: cover;
		-moz-background-size: cover;
		-o-background-size: cover;
		background-size: cover;
	}
	
	html,body{
		margin:0;	
		height:100%;
		overflow:hidden;
	}
	#capa1{
		height:100px;
		width:100px;
		background:red;
		left:50px;
		top:50px;	
		position:relative;	
	}
	#capa1:hover{
		background:yellow;
	}
</style>
<script>
$(document).ready(function(){

		/*
		$('#container').click(function(){ 
		   $(this).animate({backgroundPosition: '+=50px 0'}); 
	    });
		*/
		
		$('#capa1').mousemove(function(){ 
			$(this).text('HOLA');
			$(this)
				.animate({top: '+=250px', width: '+=100px', fontSize: '+=30px'}, '100', 'linear')
				.animate({top: '-=250px',  height: '+=100px'}, '100', 'linear');
	    });
		
		/*
		$(document).click(function(ev){
			alert(ev.pageX);
		});
		*/ 
		
		$(document).mousemove(function(e){
			pos = e.pageX;
			lastLeft = $('#container').offset().left; //siempre 0
			lastRight = $('#container').outerWidth();
   		});
		
		setInterval(function(){
			if(pos < lastLeft+10){
				$('#container').animate({backgroundPosition: '+=100px 0'},'100', 'linear');
				$('#capa1').animate({left: '+=100'},'100', 'linear');
				var xCurrent = $('#container').css('background-position');
			}else if(pos <= lastRight-10){					
				$('#container').css('background-position', xCurrent+'px 0');
			}else{
				$('#container').animate({backgroundPosition: '-=100px 0'},'100', 'linear');
				$('#capa1').animate({left: '-=100'},'100', 'linear');
				var xCurrent = $('#container').css('background-position');
			}
		},'400');
		
})
</script>
</head>

<body>
<div id="container">
	<div id="capa1">Me muevo?</div>
</div>
</body>
</html>
